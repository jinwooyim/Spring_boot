<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.boot.dao.RecipeDAO">

	<!-- 레시피 등록 -->
	<insert id="insert_recipe" parameterType="hashmap" useGeneratedKeys="true" keyProperty="rc_recipe_id">
		insert into Recipe (
		rc_name, rc_description, rc_category1_id,
		rc_cooking_time, rc_difficulty,
		rc_tip, rc_tag
		)
		VALUES (
		#{rc_name},
		#{rc_description},
		#{rc_category1_id},
		#{rc_cooking_time},
		#{rc_difficulty},
		#{rc_tip},
		#{rc_tag}
		)
	</insert>

	<insert id="insert_rc_ingredient" parameterType="java.util.List">
	        INSERT INTO rc_ingredient (
	        	rc_recipe_id,
	            rc_ingredient_name,
	            rc_ingredient_amount
	        )
	        VALUES (
	            (SELECT MAX(rc_recipe_id) FROM Recipe),
	            #{rc_ingredient_name},
	            #{rc_ingredient_amount}
	        )
	</insert>
	
	<!-- 과정 insert -->
	<insert id="insert_rc_course" parameterType="java.util.List">
	        INSERT INTO rc_course (
	        	rc_recipe_id,
	            rc_course_description
	        )
	        VALUES (
	        	(SELECT MAX(rc_recipe_id) FROM Recipe),
	            #{rc_course_description}
	        )
	</insert>


</mapper>
